RabbitMQ是一种常用的消息队列服务器，是通过erlang编写的，所以再运行这个服务器的服务器上需要先不是erlang的环境。

# 环境部署

我这里使用的是yum直接安装的RabbitMQ。再生产环境中，常用的是二进制部署或者编译安装。这里为了方便就使用了yum安装。

**注意：在使用yum安装的时候会自动安装erlang的环境，编译安装则需要进行手动安装**

# RabbitMQ的原理

当程序和RabbitMQ服务器认证后，会生成一个AMQP信道。一个AMQP中好汉多个信道。这样的话就可以减少TCP的连接创建数量，提高服务器效率，减少开销。

# 虚拟主机

和Nginx类似，RabbitMQ会生成多个虚拟主机，每个虚拟主机负责一个服务。

添加虚拟主机：

```bash
rabbitmqctl add_vhost [vhost_name]
```

需要注意的是，每个虚拟主机之间都不会互相通信。

