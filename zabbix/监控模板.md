模板就是一些监控条件的集合，一般情况下zabbix具有一些基础的监控模板，但是对于一些特殊情况需要定制监控。这样的情况可以对主机直接设置监控项目。但实际上，集群内可能有击败上千的node，不能一个一个的去设置监控项，所以这里就需要使用模板，直接套给主机。

# 创建模板

在配置->模板页面中，点击创建模板，创建一个模板。

![2.png](.\img\2.png)

上边有三个选项卡，我们常用前两个。

模板选项卡：模板名的制定和群组的指定。

链接的模板：这和python中的继承父类是一个意思，讲父模板中的数据引入到新的模板中。

# 给模板创建监控项

创建监控项的方法，对于所有对象是一样的。

![3.png](.\img\3.png)

这里有几个基本的参数需要设置

名称，一定要定义成唯一的。

类型和键值，这两个是成对的。可以理解为类型是键值的一个集合，键值是服务端获取监控节点的依据。

监控项返回的数据是多种多样的，有纯数据，有0和1，也有一些字符串，所以我们就需要不同的方法进行解析。

这里要注意一点，更新时间。更新时间就是服务器获取监控节点数据的周期，这个周期不宜过长，过长的周期没有数据的监控价值。但是时间过短的话，就会给双端产生一定的压力。所以，这个时间一定要取合适。

数据保存时间，这个根据需求来保存就ok了，不一定要保存长时间的，只要够咱们分析服务器压力数据就可以了。

# 给模板创建触发器

触发器是对监控项和报警之间的联系纽带。当监控项触及到触发器的阈值时触发报警。


![4.png](.\img\4.png)

同样，这里的名称需要唯一。

表达式，通常会使用后边的添加自动生成表达式，一般不会进行手写。这个表达式表示了触发器触发警报的条件。

这里有一个很重要的项目叫严重性。严重性的分级会影响工程师对不同警报的响应等级。这里建议将服务器宕机设置成灾难，其他的错误按照实际情况进行分级。


下边的事件迭代，就是表示事件完成的条件。和上边的表达式写法一样。

事件成功关闭选项，设置了事件关闭的标记匹配条件。

# 给模板创建图形

这里要引入两个不同的概念，图形和聚合图形。图形就是将单个监控数据实现绘图，然后单一表示。聚合图形就是将多个监控图像进行聚合，然后放在一起列出来。

图形的创建，主要需要注意监控项。监控项一定要注意，数据类型要对应到图形类别，否则会无法绘图，或者出现一条直线都是1的情况。

上边这些参数就可以构成一个基本的监控模板，可以进行一些基础的业务环境监控。

